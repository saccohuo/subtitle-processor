# Subtitle Processing Service å­—å¹•å¤„ç†æœåŠ¡

[English](#english) | [ä¸­æ–‡](#chinese)

> **Note**: This README is entirely generated by AI and is for reference only.  
> **æ³¨æ„**ï¼šæœ¬ README å®Œå…¨ç”± AI ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒã€‚

<a name="english"></a>
## ğŸŒ English

### Overview
A comprehensive subtitle processing service that automatically downloads, transcribes, and manages video subtitles from various platforms. Features a Telegram bot interface and a web management portal.

### ğŸš€ Features
- **Multi-Platform Support**
  - YouTube video subtitle extraction
  - Bilibili video subtitle processing
  - Automatic fallback to audio transcription
  
- **Subtitle Processing**
  - Direct subtitle download from platforms
  - Audio transcription using FunASR
  - Support for multiple subtitle formats (SRT, VTT, JSON3)
  
- **User Interfaces**
  - Chrome Extension for one-click processing
  - Telegram Bot for easy access
  - Web interface for subtitle management
  - Real-time subtitle viewing and searching
  
- **File Management**
  - Automatic file organization
  - Metadata tracking
  - Timeline visualization

- **Readwise Integration**
  - Automatic article creation from subtitles
  - Rich text formatting support
  - Seamless sync with Readwise Reader
  - Smart content segmentation for long videos

### ğŸ› ï¸ Technical Stack
- Backend: Python Flask
- Frontend: HTML/CSS/JavaScript
- Transcription: FunASR
- Container: Docker
- Storage: JSON-based file system

### ğŸ“¦ Installation
1. Clone the repository
2. Install Docker and Docker Compose
3. Configure environment variables:
   ```bash
   TELEGRAM_TOKEN=your_telegram_bot_token
   READWISE_TOKEN=your_readwise_token
   ```
4. Configure Firefox cookies for YouTube access:
   - Copy your Firefox profile directory (located at `C:\Users\<USER_NAME>\AppData\Roaming\Mozilla\Firefox\Profiles\`) to the `firefox_profile` directory in the project
   - This enables downloading restricted YouTube videos using your Firefox login cookies
5. Start the services:
   ```bash
   docker-compose up --build
   ```

### ğŸ”§ Usage

#### ğŸš€ **Three Ways to Use the Service**

#### **ğŸ”§ Chrome Extension** (Recommended for browsing)
- **Installation**: Load the `chrome-extension` folder as an unpacked extension in Chrome
- **Usage**: 
  - Visit any YouTube video page
  - Click the extension icon in the toolbar
  - Configure server URL and Readwise token
  - Click "Extract Current Page" to process the video
- **Best for**: Instant processing while browsing YouTube

#### **ğŸŒ Web Interface** (Best for batch processing)
- **Access**: Open `http://localhost:5000` in your browser
- **Features**:
  - Upload video files or paste video URLs
  - View and manage all processed subtitles
  - Search through subtitle content
  - Download subtitle files (.srt format)
- **Best for**: Managing multiple files and detailed operations

#### **ğŸ’¬ Telegram Bot** (Perfect for mobile)
- **Setup**: Configure your bot token in the config file
- **Usage**:
  - Send video URLs directly to the bot
  - Upload audio/video files for transcription
  - Receive processed subtitle files automatically
- **Best for**: On-the-go processing from mobile devices

#### **ğŸ“š Readwise Integration**
- Automatically saves transcripts to Readwise Reader
- Preserves video metadata (title, URL, publish date)
- Intelligently splits long content into readable segments
- Access transcripts alongside your other reading materials

### ğŸ“ License
MIT License

### ğŸ™ Acknowledgments
Special thanks to:
- [Windsurf](https://github.com/codeium/windsurf) - The world's first agentic IDE that made this project development possible
- Claude 3.5 Sonnet - For providing comprehensive AI assistance throughout the development process

---

<a name="chinese"></a>
## ğŸŒ ä¸­æ–‡

### æ¦‚è¿°
ä¸€ä¸ªç»¼åˆæ€§çš„å­—å¹•å¤„ç†æœåŠ¡ï¼Œå¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€è½¬å½•å’Œç®¡ç†æ¥è‡ªå„ç§å¹³å°çš„è§†é¢‘å­—å¹•ã€‚æä¾› Telegram æœºå™¨äººæ¥å£å’Œç½‘é¡µç®¡ç†é—¨æˆ·ã€‚

### ğŸš€ åŠŸèƒ½ç‰¹ç‚¹
- **å¤šå¹³å°æ”¯æŒ**
  - YouTube è§†é¢‘å­—å¹•æå–
  - Bilibili è§†é¢‘å­—å¹•å¤„ç†
  - è‡ªåŠ¨éŸ³é¢‘è½¬å½•å¤‡é€‰æ–¹æ¡ˆ
  
- **å­—å¹•å¤„ç†**
  - ç›´æ¥ä»å¹³å°ä¸‹è½½å­—å¹•
  - ä½¿ç”¨ FunASR è¿›è¡ŒéŸ³é¢‘è½¬å½•
  - æ”¯æŒå¤šç§å­—å¹•æ ¼å¼ï¼ˆSRTã€VTTã€JSON3ï¼‰
  
- **ç”¨æˆ·ç•Œé¢**
  - Chrome æµè§ˆå™¨æ’ä»¶ä¸€é”®å¤„ç†
  - Telegram æœºå™¨äººä¾¿æ·è®¿é—®
  - ç½‘é¡µå­—å¹•ç®¡ç†ç•Œé¢
  - å®æ—¶å­—å¹•æŸ¥çœ‹å’Œæœç´¢
  
- **æ–‡ä»¶ç®¡ç†**
  - è‡ªåŠ¨æ–‡ä»¶ç»„ç»‡
  - å…ƒæ•°æ®è·Ÿè¸ª
  - æ—¶é—´è½´å¯è§†åŒ–

- **Readwise é›†æˆ**
  - è‡ªåŠ¨ä»å­—å¹•åˆ›å»ºæ–‡ç« 
  - æ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼
  - ä¸ Readwise Reader æ— ç¼åŒæ­¥
  - æ™ºèƒ½åˆ†æ®µå¤„ç†é•¿è§†é¢‘å†…å®¹

### ğŸ› ï¸ æŠ€æœ¯æ ˆ
- åç«¯ï¼šPython Flask
- å‰ç«¯ï¼šHTML/CSS/JavaScript
- è½¬å½•ï¼šFunASR
- å®¹å™¨ï¼šDocker
- å­˜å‚¨ï¼šåŸºäº JSON çš„æ–‡ä»¶ç³»ç»Ÿ

### ğŸ“¦ å®‰è£…æ­¥éª¤
1. å…‹éš†ä»“åº“
2. å®‰è£… Docker å’Œ Docker Compose
3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   ```bash
   TELEGRAM_TOKEN=ä½ çš„_telegram_æœºå™¨äºº_token
   READWISE_TOKEN=ä½ çš„_readwise_token
   ```
4. é…ç½® Firefox cookies ä»¥è®¿é—® YouTubeï¼š
   - å°† Firefox é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆä½äº `C:\Users\<USER_NAME>\AppData\Roaming\Mozilla\Firefox\Profiles\`ï¼‰å¤åˆ¶åˆ°é¡¹ç›®ä¸­çš„ `firefox_profile` ç›®å½•
   - è¿™ä½¿æ‚¨å¯ä»¥ä½¿ç”¨ Firefox ç™»å½• cookie ä¸‹è½½å—é™åˆ¶çš„ YouTube è§†é¢‘
5. å¯åŠ¨æœåŠ¡ï¼š
   ```bash
   docker-compose up --build
   ```

### ğŸ”§ ä½¿ç”¨æ–¹æ³•

#### ğŸš€ **ä¸‰ç§ä½¿ç”¨æ–¹å¼**

#### **ğŸ”§ Chrome æµè§ˆå™¨æ’ä»¶**ï¼ˆæµè§ˆæ—¶æ¨èï¼‰
- **å®‰è£…æ–¹æ³•**ï¼šå°† `chrome-extension` æ–‡ä»¶å¤¹ä½œä¸ºæœªæ‰“åŒ…æ‰©å±•ç¨‹åºåŠ è½½åˆ° Chrome
- **ä½¿ç”¨æ­¥éª¤**ï¼š
  - è®¿é—®ä»»æ„ YouTube è§†é¢‘é¡µé¢
  - ç‚¹å‡»å·¥å…·æ ä¸­çš„æ’ä»¶å›¾æ ‡
  - é…ç½®æœåŠ¡å™¨åœ°å€å’Œ Readwise Token
  - ç‚¹å‡»"æå–å½“å‰é¡µé¢"å¤„ç†è§†é¢‘
- **é€‚åˆåœºæ™¯**ï¼šæµè§ˆ YouTube æ—¶å³æ—¶å¤„ç†è§†é¢‘

#### **ğŸŒ ç½‘é¡µç•Œé¢**ï¼ˆæ‰¹é‡å¤„ç†é¦–é€‰ï¼‰
- **è®¿é—®åœ°å€**ï¼šæµè§ˆå™¨æ‰“å¼€ `http://localhost:5000`
- **ä¸»è¦åŠŸèƒ½**ï¼š
  - ä¸Šä¼ è§†é¢‘æ–‡ä»¶æˆ–ç²˜è´´è§†é¢‘é“¾æ¥
  - æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å·²å¤„ç†çš„å­—å¹•
  - åœ¨å­—å¹•å†…å®¹ä¸­æœç´¢å…³é”®è¯
  - ä¸‹è½½å­—å¹•æ–‡ä»¶ï¼ˆ.srt æ ¼å¼ï¼‰
- **é€‚åˆåœºæ™¯**ï¼šç®¡ç†å¤šä¸ªæ–‡ä»¶å’Œè¯¦ç»†æ“ä½œ

#### **ğŸ’¬ Telegram æœºå™¨äºº**ï¼ˆç§»åŠ¨ç«¯å®Œç¾é€‰æ‹©ï¼‰
- **é…ç½®æ–¹æ³•**ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æœºå™¨äºº Token
- **ä½¿ç”¨æ–¹å¼**ï¼š
  - ç›´æ¥å‘æœºå™¨äººå‘é€è§†é¢‘é“¾æ¥
  - ä¸Šä¼ éŸ³é¢‘/è§†é¢‘æ–‡ä»¶è¿›è¡Œè½¬å½•
  - è‡ªåŠ¨æ¥æ”¶å¤„ç†å¥½çš„å­—å¹•æ–‡ä»¶
- **é€‚åˆåœºæ™¯**ï¼šç§»åŠ¨è®¾å¤‡éšæ—¶éšåœ°å¤„ç†

#### **ğŸ“š Readwise é›†æˆåŠŸèƒ½**
- è‡ªåŠ¨å°†è½¬å½•å†…å®¹ä¿å­˜åˆ° Readwise Reader
- ä¿ç•™è§†é¢‘å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€é“¾æ¥ã€å‘å¸ƒæ—¥æœŸï¼‰
- æ™ºèƒ½åˆ†å‰²é•¿å†…å®¹ä¸ºæ˜“è¯»ç‰‡æ®µ
- ä¸å…¶ä»–é˜…è¯»ææ–™ä¸€èµ·ç®¡ç†è½¬å½•æ–‡æœ¬

#### **ğŸ’¡ ä½¿ç”¨å»ºè®®**
- **æ—¥å¸¸æµè§ˆ**ï¼šä½¿ç”¨ Chrome æ’ä»¶ï¼Œæ–¹ä¾¿å¿«æ·
- **æ‰¹é‡å¤„ç†**ï¼šä½¿ç”¨ç½‘é¡µç‰ˆï¼ŒåŠŸèƒ½å®Œæ•´
- **ç§»åŠ¨åŠå…¬**ï¼šä½¿ç”¨ Telegram æœºå™¨äººï¼Œéšæ—¶å¯ç”¨

### ğŸ“ è®¸å¯è¯
MIT è®¸å¯è¯

### ğŸ™ è‡´è°¢
ç‰¹åˆ«æ„Ÿè°¢ï¼š
- [Windsurf](https://github.com/codeium/windsurf) - ä¸–ç•Œé¦–ä¸ªæ™ºèƒ½ä»£ç† IDEï¼Œä½¿æœ¬é¡¹ç›®çš„å¼€å‘æˆä¸ºå¯èƒ½
- Claude 3.5 Sonnet - åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­æä¾›å…¨é¢çš„ AI è¾…åŠ©
