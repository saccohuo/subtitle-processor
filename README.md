# Subtitle Processing Service 字幕处理服务

[English](#english) | [中文](#chinese)

> **Note**: This README is entirely generated by AI and is for reference only.  
> **注意**：本 README 完全由 AI 生成，仅供参考。

<a name="english"></a>
## 🌍 English

### Overview
A comprehensive subtitle processing service that automatically downloads, transcribes, and manages video subtitles from various platforms. Features a Telegram bot interface and a web management portal.

### 🚀 Features
- **Multi-Platform Support**
  - YouTube video subtitle extraction
  - Bilibili video subtitle processing
  - Automatic fallback to audio transcription
  
- **Subtitle Processing**
  - Direct subtitle download from platforms
  - Audio transcription using FunASR
  - Support for multiple subtitle formats (SRT, VTT, JSON3)
  
- **User Interfaces**
  - Chrome Extension for one-click processing
  - Telegram Bot for easy access
  - Web interface for subtitle management
  - Real-time subtitle viewing and searching
  
- **File Management**
  - Automatic file organization
  - Metadata tracking
  - Timeline visualization

- **Readwise Integration**
  - Automatic article creation from subtitles
  - Rich text formatting support
  - Seamless sync with Readwise Reader
  - Smart content segmentation for long videos

### 🛠️ Technical Stack
- Backend: Python Flask
- Frontend: HTML/CSS/JavaScript
- Transcription: FunASR
- Container: Docker
- Storage: JSON-based file system

### 📦 Installation
1. Clone the repository
2. Install Docker and Docker Compose
3. Configure environment variables:
   ```bash
   TELEGRAM_TOKEN=your_telegram_bot_token
   READWISE_TOKEN=your_readwise_token
   ```
4. Configure Firefox cookies for YouTube access:
   - Copy your Firefox profile directory (located at `C:\Users\<USER_NAME>\AppData\Roaming\Mozilla\Firefox\Profiles\`) to the `firefox_profile` directory in the project
   - This enables downloading restricted YouTube videos using your Firefox login cookies
5. Start the services:
   ```bash
   docker-compose up --build
   ```

### 🔧 Usage

#### 🚀 **Three Ways to Use the Service**

#### **🔧 Chrome Extension** (Recommended for browsing)
- **Installation**: Load the `chrome-extension` folder as an unpacked extension in Chrome
- **Usage**: 
  - Visit any YouTube video page
  - Click the extension icon in the toolbar
  - Configure server URL and Readwise token
  - Click "Extract Current Page" to process the video
- **Best for**: Instant processing while browsing YouTube

#### **🌐 Web Interface** (Best for batch processing)
- **Access**: Open `http://localhost:5000` in your browser
- **Features**:
  - Upload video files or paste video URLs
  - View and manage all processed subtitles
  - Search through subtitle content
  - Download subtitle files (.srt format)
- **Best for**: Managing multiple files and detailed operations

#### **💬 Telegram Bot** (Perfect for mobile)
- **Setup**: Configure your bot token in the config file
- **Usage**:
  - Send video URLs directly to the bot
  - Upload audio/video files for transcription
  - Receive processed subtitle files automatically
- **Best for**: On-the-go processing from mobile devices

#### **📚 Readwise Integration**
- Automatically saves transcripts to Readwise Reader
- Preserves video metadata (title, URL, publish date)
- Intelligently splits long content into readable segments
- Access transcripts alongside your other reading materials

### 📝 License
MIT License

### 🙏 Acknowledgments
Special thanks to:
- [Windsurf](https://github.com/codeium/windsurf) - The world's first agentic IDE that made this project development possible
- Claude 3.5 Sonnet - For providing comprehensive AI assistance throughout the development process

---

<a name="chinese"></a>
## 🌏 中文

### 概述
一个综合性的字幕处理服务，可以自动下载、转录和管理来自各种平台的视频字幕。提供 Telegram 机器人接口和网页管理门户。

### 🚀 功能特点
- **多平台支持**
  - YouTube 视频字幕提取
  - Bilibili 视频字幕处理
  - 自动音频转录备选方案
  
- **字幕处理**
  - 直接从平台下载字幕
  - 使用 FunASR 进行音频转录
  - 支持多种字幕格式（SRT、VTT、JSON3）
  
- **用户界面**
  - Chrome 浏览器插件一键处理
  - Telegram 机器人便捷访问
  - 网页字幕管理界面
  - 实时字幕查看和搜索
  
- **文件管理**
  - 自动文件组织
  - 元数据跟踪
  - 时间轴可视化

- **Readwise 集成**
  - 自动从字幕创建文章
  - 支持富文本格式
  - 与 Readwise Reader 无缝同步
  - 智能分段处理长视频内容

### 🛠️ 技术栈
- 后端：Python Flask
- 前端：HTML/CSS/JavaScript
- 转录：FunASR
- 容器：Docker
- 存储：基于 JSON 的文件系统

### 📦 安装步骤
1. 克隆仓库
2. 安装 Docker 和 Docker Compose
3. 配置环境变量：
   ```bash
   TELEGRAM_TOKEN=你的_telegram_机器人_token
   READWISE_TOKEN=你的_readwise_token
   ```
4. 配置 Firefox cookies 以访问 YouTube：
   - 将 Firefox 配置文件目录（位于 `C:\Users\<USER_NAME>\AppData\Roaming\Mozilla\Firefox\Profiles\`）复制到项目中的 `firefox_profile` 目录
   - 这使您可以使用 Firefox 登录 cookie 下载受限制的 YouTube 视频
5. 启动服务：
   ```bash
   docker-compose up --build
   ```

### 🔧 使用方法

#### 🚀 **三种使用方式**

#### **🔧 Chrome 浏览器插件**（浏览时推荐）
- **安装方法**：将 `chrome-extension` 文件夹作为未打包扩展程序加载到 Chrome
- **使用步骤**：
  - 访问任意 YouTube 视频页面
  - 点击工具栏中的插件图标
  - 配置服务器地址和 Readwise Token
  - 点击"提取当前页面"处理视频
- **适合场景**：浏览 YouTube 时即时处理视频

#### **🌐 网页界面**（批量处理首选）
- **访问地址**：浏览器打开 `http://localhost:5000`
- **主要功能**：
  - 上传视频文件或粘贴视频链接
  - 查看和管理所有已处理的字幕
  - 在字幕内容中搜索关键词
  - 下载字幕文件（.srt 格式）
- **适合场景**：管理多个文件和详细操作

#### **💬 Telegram 机器人**（移动端完美选择）
- **配置方法**：在配置文件中设置机器人 Token
- **使用方式**：
  - 直接向机器人发送视频链接
  - 上传音频/视频文件进行转录
  - 自动接收处理好的字幕文件
- **适合场景**：移动设备随时随地处理

#### **📚 Readwise 集成功能**
- 自动将转录内容保存到 Readwise Reader
- 保留视频元数据（标题、链接、发布日期）
- 智能分割长内容为易读片段
- 与其他阅读材料一起管理转录文本

#### **💡 使用建议**
- **日常浏览**：使用 Chrome 插件，方便快捷
- **批量处理**：使用网页版，功能完整
- **移动办公**：使用 Telegram 机器人，随时可用

### 📝 许可证
MIT 许可证

### 🙏 致谢
特别感谢：
- [Windsurf](https://github.com/codeium/windsurf) - 世界首个智能代理 IDE，使本项目的开发成为可能
- Claude 3.5 Sonnet - 在整个开发过程中提供全面的 AI 辅助
